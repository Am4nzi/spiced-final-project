{"ast":null,"code":"var _jsxFileName = \"/home/spiced/spiced/sampler2/Sampler/src/components/SamplerGrid/SamplerGrid.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { Context } from '../../contexts/SamplerContext';\nimport * as types from '../../reducers/types';\nimport GridPad from '../../contexts/Config/PadGrid';\nimport Colors from '../../Config/ColorScheme';\nimport Hud from '../Hud/Hud';\nimport PadEditor from '../PadEditor/PadEditor';\nimport Pad from '../Pad/Pad';\nimport midiMap from '../../Config/midiMap';\nimport './SamplerGrid.css';\n\nvar SamplerGrid = function SamplerGrid() {\n  var context = useContext(Context);\n  var gridArr = context.gridPadsArr;\n\n  var renderPad = function renderPad(item) {\n    var backgroundColor = Colors.black;\n    var source = context.sources[item.id];\n    var midiNote = midiMap[item.id + 36].note;\n    if (!context.editMode && source && source.buffer) backgroundColor = context.gridPadsArr[context.selectedPad].color;\n    if (context.editMode && source && source.buffer) backgroundColor = Colors.green;\n    return React.createElement(Pad, {\n      midiNote: midiNote,\n      key: item.id,\n      id: item.id,\n      name: item.name,\n      backgroundColor: backgroundColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    });\n  };\n\n  var rendercontent = function rendercontent() {\n    if (!context.editMode) return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, gridArr.map(function (item) {\n      return renderPad(item);\n    }));\n    return React.createElement(PadEditor, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    });\n  };\n\n  var testForTouchDevice = function testForTouchDevice() {\n    return 'ontouchstart' in window;\n  };\n\n  var testForMidiAPI = function testForMidiAPI() {\n    return \"requestMIDIAccess\" in navigator;\n  };\n\n  var generateGrid = function generateGrid() {\n    var midiEnabled = testForMidiAPI();\n    var touchEnabled = testForTouchDevice();\n    var gridPadsArr = [];\n\n    for (var i = 0; i < context.numPads; i++) {\n      var newPad = new GridPad({\n        id: i\n      });\n      gridPadsArr.push(newPad);\n    }\n\n    var payload = {\n      gridPadsArr: gridPadsArr,\n      touchEnabled: touchEnabled,\n      midiEnabled: midiEnabled\n    };\n    context.dispatch({\n      type: types.GENERATE_GRID,\n      payload: payload\n    });\n  };\n\n  useEffect(function () {\n    if (context.gridPadsArr.length < 1) generateGrid();\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"grid-wrapper\",\n    style: {\n      backgroundColor: Colors.red\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(Hud, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"grid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, rendercontent()));\n};\n\nexport default SamplerGrid;","map":{"version":3,"sources":["/home/spiced/spiced/sampler2/Sampler/src/components/SamplerGrid/SamplerGrid.js"],"names":["React","useContext","useEffect","Context","types","GridPad","Colors","Hud","PadEditor","Pad","midiMap","SamplerGrid","context","gridArr","gridPadsArr","renderPad","item","backgroundColor","black","source","sources","id","midiNote","note","editMode","buffer","selectedPad","color","green","name","rendercontent","map","testForTouchDevice","window","testForMidiAPI","navigator","generateGrid","midiEnabled","touchEnabled","i","numPads","newPad","push","payload","dispatch","type","GENERATE_GRID","length","red"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect} from 'react';\nimport {Context} from '../../contexts/SamplerContext';\nimport * as types from '../../reducers/types';\nimport GridPad from '../../contexts/Config/PadGrid';\nimport Colors from '../../Config/ColorScheme';\nimport Hud from '../Hud/Hud';\nimport PadEditor from '../PadEditor/PadEditor';\nimport Pad from '../Pad/Pad';\nimport midiMap from '../../Config/midiMap';\nimport './SamplerGrid.css';\n\nconst SamplerGrid = () => {\n    const context = useContext(Context);\n    const gridArr = context.gridPadsArr;\n    const renderPad = (item) => {\n        let backgroundColor = Colors.black\n        let source = context.sources[item.id];\n        const midiNote = midiMap[item.id + 36].note;\n        if(!context.editMode && source && source.buffer) backgroundColor = context.gridPadsArr[context.selectedPad].color;\n        if(context.editMode && source && source.buffer) backgroundColor = Colors.green;\n        return <Pad\n        midiNote={midiNote}\n        key={item.id}\n        id={item.id}\n        name={item.name}\n        backgroundColor={backgroundColor}\n        />\n    }\n    const rendercontent = () => {\n        if(!context.editMode) return <div>{gridArr.map((item) => { return renderPad(item) })}</div>\n        return <PadEditor />\n    }\n    const testForTouchDevice = () => {\n        return 'ontouchstart' in window;\n    }\n    const testForMidiAPI = () => {\n        return \"requestMIDIAccess\" in navigator;\n    }\n    const generateGrid = () => {\n        let midiEnabled = testForMidiAPI();\n        let touchEnabled = testForTouchDevice();\n        let gridPadsArr = [];\n        for(let i = 0; i < context.numPads; i++){\n            let newPad = new GridPad({id: i})\n            gridPadsArr.push(newPad)\n        }\n        let payload = {gridPadsArr, touchEnabled, midiEnabled}\n        context.dispatch({ type: types.GENERATE_GRID, payload })\n    }\n    useEffect(() => {\n        if(context.gridPadsArr.length < 1) generateGrid();\n    }, []);\n    return (\n        <div\n        className=\"grid-wrapper\"\n        style={{backgroundColor: Colors.red}}\n        >\n        <Hud />\n            <div className=\"grid\">\n                {rendercontent()}\n            </div>\n        </div>\n    )\n}\n\nexport default SamplerGrid\n"]},"metadata":{},"sourceType":"module"}