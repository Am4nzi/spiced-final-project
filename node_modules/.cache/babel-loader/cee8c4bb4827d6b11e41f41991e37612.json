{"ast":null,"code":"var _jsxFileName = \"/home/spiced/spiced/spiced-final-project/src/components/SamplerGrid/SamplerGrid.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { Context } from '../../contexts/SamplerContext';\nimport * as types from '../../reducers/types';\nimport GridPad from '../../contexts/Config/PadGrid';\nimport Colors from '../../Config/ColorScheme';\nimport Hud from '../Hud/Hud';\nimport PadEditor from '../PadEditor/PadEditor';\nimport Pad from '../Pad/Pad';\nimport midiMap from '../../Config/midiMap';\nimport './SamplerGrid.css';\n\nvar SamplerGrid = function SamplerGrid() {\n  var context = useContext(Context);\n  var gridArr = context.gridPadsArr;\n  var selectedPad = context.gridPadsArr[context.selectedPad];\n  var max = 0;\n  var source = context.gridPadsArr[context.selectedPad].source;\n\n  var renderPad = function renderPad(item) {\n    var backgroundColor = Colors.black;\n    var source = context.sources[item.id];\n    var midiNote = midiMap[item.id + 36].note;\n    if (!context.editMode && source && source.buffer) backgroundColor = context.gridPadsArr[context.selectedPad].color;\n    if (context.editMode && source && source.buffer) backgroundColor = Colors.green;\n    return React.createElement(Pad, {\n      midiNote: midiNote,\n      key: item.id,\n      id: item.id,\n      name: item.name,\n      backgroundColor: backgroundColor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    });\n  };\n\n  var rendercontent = function rendercontent() {\n    if (!context.editMode) return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, gridArr.map(function (item) {\n      return renderPad(item);\n    }));\n    return React.createElement(PadEditor, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    });\n  };\n\n  var testForTouchDevice = function testForTouchDevice() {\n    return 'ontouchstart' in window;\n  };\n\n  var testForMidiAPI = function testForMidiAPI() {\n    return \"requestMIDIAccess\" in navigator;\n  };\n\n  var generateGrid = function generateGrid() {\n    var midiEnabled = testForMidiAPI();\n    var touchEnabled = testForTouchDevice();\n    var gridPadsArr = [];\n\n    for (var i = 0; i < context.numPads; i++) {\n      var newPad = new GridPad({\n        id: i\n      });\n      gridPadsArr.push(newPad);\n    }\n\n    var payload = {\n      gridPadsArr: gridPadsArr,\n      touchEnabled: touchEnabled,\n      midiEnabled: midiEnabled\n    };\n    context.dispatch({\n      type: types.GENERATE_GRID,\n      payload: payload\n    });\n  };\n\n  useEffect(function () {\n    if (context.gridPadsArr.length < 1) generateGrid();\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"grid-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(Hud, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"grid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, rendercontent()), React.createElement(PadEditor, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }));\n};\n\nexport default SamplerGrid;","map":{"version":3,"sources":["/home/spiced/spiced/spiced-final-project/src/components/SamplerGrid/SamplerGrid.js"],"names":["React","useContext","useEffect","Context","types","GridPad","Colors","Hud","PadEditor","Pad","midiMap","SamplerGrid","context","gridArr","gridPadsArr","selectedPad","max","source","renderPad","item","backgroundColor","black","sources","id","midiNote","note","editMode","buffer","color","green","name","rendercontent","map","testForTouchDevice","window","testForMidiAPI","navigator","generateGrid","midiEnabled","touchEnabled","i","numPads","newPad","push","payload","dispatch","type","GENERATE_GRID","length"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect} from 'react';\nimport {Context} from '../../contexts/SamplerContext';\nimport * as types from '../../reducers/types';\nimport GridPad from '../../contexts/Config/PadGrid';\nimport Colors from '../../Config/ColorScheme';\nimport Hud from '../Hud/Hud';\nimport PadEditor from '../PadEditor/PadEditor';\nimport Pad from '../Pad/Pad';\nimport midiMap from '../../Config/midiMap';\nimport './SamplerGrid.css';\n\nconst SamplerGrid = () => {\n    const context = useContext(Context);\n    const gridArr = context.gridPadsArr;\n    let selectedPad = context.gridPadsArr[context.selectedPad];\n    let max = 0;\n    let source = context.gridPadsArr[context.selectedPad].source;\n    const renderPad = (item) => {\n        let backgroundColor = Colors.black\n        let source = context.sources[item.id];\n        const midiNote = midiMap[item.id + 36].note;\n        if(!context.editMode && source && source.buffer) backgroundColor = context.gridPadsArr[context.selectedPad].color;\n        if(context.editMode && source && source.buffer) backgroundColor = Colors.green;\n        return <Pad\n        midiNote={midiNote}\n        key={item.id}\n        id={item.id}\n        name={item.name}\n        backgroundColor={backgroundColor}\n        />\n    }\n    const rendercontent = () => {\n        if(!context.editMode) return <div>{gridArr.map((item) => { return renderPad(item) })}</div>\n        return <PadEditor />\n    }\n    const testForTouchDevice = () => {\n        return 'ontouchstart' in window;\n    }\n    const testForMidiAPI = () => {\n        return \"requestMIDIAccess\" in navigator;\n    }\n    const generateGrid = () => {\n        let midiEnabled = testForMidiAPI();\n        let touchEnabled = testForTouchDevice();\n        let gridPadsArr = [];\n        for(let i = 0; i < context.numPads; i++){\n            let newPad = new GridPad({id: i})\n            gridPadsArr.push(newPad)\n        }\n        let payload = {gridPadsArr, touchEnabled, midiEnabled}\n        context.dispatch({ type: types.GENERATE_GRID, payload })\n    }\n    useEffect(() => {\n        if(context.gridPadsArr.length < 1) generateGrid();\n    }, []);\n    return (\n        <div\n        className=\"grid-wrapper\"\n\n        >\n        <Hud />\n            <div className=\"grid\">\n                {rendercontent()}\n            </div>\n        <PadEditor />\n        </div>\n    )\n}\n\nexport default SamplerGrid\n"]},"metadata":{},"sourceType":"module"}